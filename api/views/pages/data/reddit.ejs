<div class="v-100">
  <h1 class="text-danger">ðŸ“Š My Reddit Data</h1>
  <p class="lead">View my Reddit posts and activity or search other users</p>

  <div class="row justify-content-center">
    <div class="col-md-8">
      <div class="card border border-danger">
        <div class="card-header">
          <h5 class="mb-0">My Reddit Profile</h5>
        </div>
        <div class="card-body">
          <% if (typeof pageData !== 'undefined' && pageData && pageData.data && pageData.data.user) { %>
            <div class="reddit-profile">
              <!-- Profile Header with Avatar -->
              <div class="profile-header">
                <% if (pageData.data.user.icon_img) { %>
                  <img src="<%= pageData.data.user.icon_img %>" alt="<%= pageData.data.user.name %>" class="profile-avatar">
                <% } %>
                <div class="profile-info">
                  <h4>
                    <%= pageData.data.user.display_name || pageData.data.user.name %>
                    <% if (pageData.data.user.verified) { %>
                      <i class="bi bi-patch-check-fill text-primary" title="Verified"></i>
                    <% } %>
                    <% if (pageData.data.user.is_gold) { %>
                      <i class="bi bi-star-fill text-warning" title="Reddit Premium"></i>
                    <% } %>
                    <% if (pageData.data.user.is_mod) { %>
                      <i class="bi bi-shield-fill text-success" title="Moderator"></i>
                    <% } %>
                  </h4>
                  <p class="text-muted">u/<%= pageData.data.user.name %></p>
                  <% if (pageData.data.user.public_description) { %>
                    <p class="profile-description"><%= pageData.data.user.public_description %></p>
                  <% } %>
                </div>
              </div>

              <!-- Account Info -->
              <div class="account-info mt-3">
                <div class="info-row">
                  <span class="info-label"><i class="bi bi-calendar"></i> Cake Day:</span>
                  <span class="info-value"><%= new Date(pageData.data.user.created_utc * 1000).toLocaleDateString() %></span>
                </div>
                <% if (pageData.data.user.subreddit && pageData.data.user.subreddit.subscribers) { %>
                  <div class="info-row">
                    <span class="info-label"><i class="bi bi-people"></i> Followers:</span>
                    <span class="info-value"><%= pageData.data.user.subreddit.subscribers.toLocaleString() %></span>
                  </div>
                <% } %>
                <div class="info-row">
                  <span class="info-label"><i class="bi bi-envelope-check"></i> Verified Email:</span>
                  <span class="info-value"><%= pageData.data.user.has_verified_email ? 'Yes' : 'No' %></span>
                </div>
              </div>

              <!-- Karma Breakdown -->
              <div class="reddit-stats">
                <div class="stat-card total">
                  <div class="stat-number"><%= pageData.data.user.total_karma.toLocaleString() %></div>
                  <div class="stat-label">Total Karma</div>
                </div>
                <div class="stat-card">
                  <div class="stat-number"><%= pageData.data.user.link_karma.toLocaleString() %></div>
                  <div class="stat-label">Post Karma</div>
                </div>
                <div class="stat-card">
                  <div class="stat-number"><%= pageData.data.user.comment_karma.toLocaleString() %></div>
                  <div class="stat-label">Comment Karma</div>
                </div>
                <% if (pageData.data.user.awardee_karma > 0) { %>
                  <div class="stat-card">
                    <div class="stat-number"><%= pageData.data.user.awardee_karma.toLocaleString() %></div>
                    <div class="stat-label">Awardee Karma</div>
                  </div>
                <% } %>
                <% if (pageData.data.user.awarder_karma > 0) { %>
                  <div class="stat-card">
                    <div class="stat-number"><%= pageData.data.user.awarder_karma.toLocaleString() %></div>
                    <div class="stat-label">Awarder Karma</div>
                  </div>
                <% } %>
              </div>

              <!-- Profile Banner -->
              <% if (pageData.data.user.subreddit && pageData.data.user.subreddit.banner_img) { %>
                <div class="profile-banner mt-3">
                  <img src="<%= pageData.data.user.subreddit.banner_img %>" alt="Profile Banner" class="banner-img">
                </div>
              <% } %>

              <!-- API Info -->
              <div class="reddit-info mt-3">
                <p class="text-info">
                  <i class="bi bi-info-circle"></i> <%= pageData.data.note || pageData.message %>
                </p>
                <div class="info-badges">
                  <span class="badge bg-secondary">Access: <%= pageData.data.access_level || 'read-only' %></span>
                  <% if (pageData.data.source) { %>
                    <span class="badge bg-info">Source: <%= pageData.data.source %></span>
                  <% } %>
                  <% if (pageData.data.last_updated) { %>
                    <span class="badge bg-dark">Updated: <%= new Date(pageData.data.last_updated).toLocaleTimeString() %></span>
                  <% } %>
                </div>
              </div>
            </div>
          <% } else if (typeof pageData !== 'undefined' && pageData && pageData.success === false) { %>
            <div class="error-state">
              <p class="text-danger">Error loading Reddit data</p>
              <p class="text-muted"><%= pageData.message || 'Unknown error' %></p>
            </div>
          <% } else { %>
            <div class="loading-state">
              <p>Loading Reddit profile data...</p>
              <p class="text-muted">Fetching latest Reddit information</p>
            </div>
          <% } %>
        </div>
      </div>
    </div>
  </div>

  <div class="row justify-content-center mt-5">
    <div class="col-md-8">
      <div class="card border-info">
        <div class="card-header">
          <h5 class="mb-0">API Endpoints</h5>
        </div>
        <div class="card-body">
          <ul class="list-unstyled">
            <li><strong>My Posts:</strong> <code>/api/v1/me/info/reddit</code></li>
            <li><strong>User Posts:</strong> <code>/api/v1/social/reddit/u/spez</code></li>
            <li><strong>Subreddit Posts:</strong> <code>/api/v1/social/reddit/r/programming</code></li>
          </ul>
          
          <div class="code-examples mt-3">
            <h6>Example curl commands:</h6>
            <div class="code-block mb-2">
              <pre><code>curl -q -LSsf <%= baseUrl %>/api/v1/me/info/reddit</code></pre>
            </div>
            <div class="code-block mb-2">
              <pre><code>curl -q -LSsf <%= baseUrl %>/api/v1/social/reddit/u/spez</code></pre>
            </div>
            <div class="code-block mb-2">
              <pre><code>curl -q -LSsf <%= baseUrl %>/api/v1/social/reddit/r/programming</code></pre>
            </div>
          </div>
          <a href="/api/v1/me/info/reddit" class="btn btn-info btn-sm" target="_blank">
            <i class="bi bi-box-arrow-up-right"></i> View Casjay Posts
          </a>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
.reddit-profile {
  padding: 1rem;
}

.profile-info h4 {
  color: var(--purple);
  margin-bottom: 0.5rem;
}

.reddit-stats {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  gap: 1rem;
  margin: 1.5rem 0;
}

.stat-card {
  background: var(--bg-secondary);
  padding: 1rem;
  border-radius: var(--radius-md);
  text-align: center;
  border: 1px solid var(--border-color);
}

.stat-number {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--cyan);
}

.stat-label {
  font-size: 0.875rem;
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.reddit-info {
  background: rgba(139, 69, 233, 0.1);
  padding: 1rem;
  border-radius: var(--radius-md);
  border-left: 4px solid var(--purple);
}

.loading-state {
  text-align: center;
  padding: 2rem;
  color: var(--text-secondary);
}
</style>